---
title: "트리거와 프로시저의 차이"
date: 2025-10-21T00:00:00
toc: true
toc_sticky: true
categories:
    - DB
tags:
    - Trigger
    - Procedure
---

# 트리거와 프로시저의 차이

- **트리거(Trigger)**와 **프로시저(Procedure)**는 모두 데이터베이스에서 실행되는 **저장된 프로그램**이지만, 두 가지는 다음과 같은 **중요한 차이점**이 있습니다.

---

# **실행 방식**

## **트리거(Trigger)**:

- **자동으로 실행**됩니다. 트리거는 특정 **이벤트**(예: `INSERT`, `UPDATE`, `DELETE` 등)가 발생할 때 자동으로 실행되며, 데이터베이스 사용자가 명시적으로 호출하지 않습니다.
- 트리거는 테이블이나 뷰에 연결되어 있으며, 트리거 조건이 충족되면 자동으로 해당 작업이 수행됩니다.
- 예: 고객 테이블에 새 고객이 추가될 때 자동으로 감사 로그에 기록.
    
    ```sql
    CREATE TRIGGER new_customer_log
    AFTER INSERT ON customers
    FOR EACH ROW
    INSERT INTO customer_log (customer_id, action_time)
    VALUES (NEW.customer_id, NOW());
    ```
    

## **프로시저(Procedure)**:

- **명시적으로 호출**되어야 실행됩니다.
- 프로시저는 데이터베이스 내에서 특정 작업을 수행하는 일련의 명령어 집합입니다.
- 사용자가 **명령문**을 통해 직접 호출해야 실행되며, 프로시저는 여러 번 재사용할 수 있는 로직을 정의할 수 있습니다.
- 예: 프로시저를 호출하여 모든 고객의 주문 수를 업데이트.
    
    ```sql
    CREATE PROCEDURE update_order_count()
    BEGIN
      UPDATE customers SET order_count = (SELECT COUNT(*) FROM orders WHERE orders.customer_id = customers.customer_id);
    END;
    
    CALL update_order_count();
    ```
    

---

# **트리거의 목적과 사용 시점**

## *트리거(Trigger)*

- **데이터의 무결성 유지**나 **특정 이벤트에 대한 자동 처리**를 위해 사용됩니다.
- 트리거는 테이블에서 **데이터 조작 작업(DML: INSERT, UPDATE, DELETE)**이 발생할 때 실행되어, 해당 작업과 연결된 추가 작업을 수행합니다.
- **사용 시점**:
    - 데이터가 삽입되거나 수정, 삭제될 때 자동으로 실행되며, 주로 데이터 무결성을 유지하거나 감사 기록을 남기는 데 사용됩니다.

## *프로시저(Procedure)*

- **일련의 작업을 재사용 가능하게 실행**하기 위해 사용됩니다.
- 프로시저는 특정 작업을 논리적으로 그룹화하여 **필요할 때** 호출해 실행할 수 있습니다.
- 복잡한 계산, 일괄 처리, 데이터 마이그레이션 등의 작업에 유용합니다.
- **사용 시점**:
    - 사용자가 명시적으로 호출할 때 실행되며, 복잡한 로직을 반복적으로 실행하거나 일괄 작업을 수행할 때 사용됩니다.

---

# **입력 파라미터**

## *트리거(Trigger)*

- **입력 파라미터를 받지 않습니다**.
- 트리거는 **이벤트**가 발생하면 자동으로 실행되기 때문에, 사용자로부터 별도의 입력을 받을 필요가 없습니다.
- 트리거는 보통 **NEW**와 **OLD** 값을 사용하여 데이터의 변경 전후 상태를 참조할 수 있습니다.
    - 예: 새로 삽입된 데이터(`NEW`)와 이전 값(`OLD`)을 사용하여 변경 내용을 기록할 수 있습니다.
        
        ```sql
        CREATE TRIGGER log_salary_change
        AFTER UPDATE ON employees
        FOR EACH ROW
        INSERT INTO salary_log (employee_id, old_salary, new_salary)
        VALUES (OLD.employee_id, OLD.salary, NEW.salary);
        ```
        

## *프로시저(Procedure)*

- **입력 파라미터**를 받을 수 있습니다.
- 프로시저는 다양한 입력 값을 받아 **그에 따라 동작**을 수행할 수 있으며, **IN**, **OUT**, **INOUT** 파라미터를 정의할 수 있습니다.
    - 예: 직원의 급여를 변경하는 프로시저는 입력 파라미터를 받아서 해당 직원의 급여를 수정할 수 있습니다.
        
        ```sql
        CREATE PROCEDURE update_salary(IN employee_id INT, IN new_salary DECIMAL)
        BEGIN
          UPDATE employees SET salary = new_salary WHERE employee_id = employee_id;
        END;
        
        CALL update_salary(101, 5000.00);
        ```
        

---

# **반환 값**

- *트리거(Trigger)*는 **값을 반환하지 않습니다**.
- 트리거는 테이블의 이벤트에 반응하여 실행되며, 그 결과로 값을 반환하지 않습니다. 트리거는 단순히 특정 동작을 수행하는 데 그 목적이 있습니다.
- *프로시저(Procedure)*는 **값을 반환할 수 있습니다**.
- 프로시저는 `OUT` 파라미터 또는 `INOUT` 파라미터를 사용하여 값을 반환할 수 있으며, 이를 통해 호출자가 프로시저의 결과를 받아볼 수 있습니다.
    - 예: 총 주문 금액을 계산하고 이를 반환하는 프로시저.
        
        ```sql
        CREATE PROCEDURE get_total_sales(OUT total DECIMAL)
        BEGIN
          SELECT SUM(amount) INTO total FROM orders;
        END;
        
        CALL get_total_sales(@total);
        SELECT @total; -- 반환된 총 주문 금액 확인
        ```
        

---

# **연관성**

## *트리거(Trigger)*

- **특정 테이블** 또는 **뷰(View)**에 종속적입니다. 트리거는 특정 테이블에서 데이터 변경이 발생할 때만 실행되므로, 그 테이블과 깊은 연관성을 가지고 있습니다.

## *프로시저(Procedure)*

- 특정 테이블에 종속되지 않고, **독립적으로** 작성되어 호출될 수 있습니다.
- 프로시저는 여러 테이블을 참조할 수도 있고, 그 외 다양한 작업을 처리할 수 있습니다.

---

# **성능 영향**

## *트리거(Trigger)*

- 데이터 조작 시 **자동으로 실행**되기 때문에, 많은 트리거가 사용되면 성능에 영향을 줄 수 있습니다.
- 특히 복잡한 로직을 가진 트리거는 데이터 삽입, 수정, 삭제 시 성능 저하를 유발할 수 있습니다.

## *프로시저(Procedure)*

- 사용자가 명시적으로 호출해야 하므로, 성능에 미치는 영향은 트리거보다는 덜 직접적입니다.
- 다만, 복잡한 로직이나 대용량 데이터를 처리하는 프로시저는 성능에 영향을 미칠 수 있습니다.

---

# 비교

| 특성 | 트리거(Trigger) | 프로시저(Procedure) |
| --- | --- | --- |
| **실행 방식** | 자동 실행 (특정 이벤트 발생 시) | 명시적 호출 필요 |
| **사용 목적** | 데이터 무결성 유지, 자동화된 작업 | 복잡한 로직 처리, 일괄 처리 |
| **입력 파라미터** | 없음 | 있음 (IN, OUT, INOUT 파라미터) |
| **반환 값** | 없음 | 반환 가능 (OUT 파라미터 사용) |
| **연관성** | 특정 테이블이나 뷰에 종속적 | 테이블에 종속되지 않고 독립적 |
| **사용 시점** | INSERT, UPDATE, DELETE 등 이벤트 발생 시 자동 실행 | 사용자가 명시적으로 호출할 때 실행 |
| **성능 영향** | 자동 실행되므로 성능에 영향을 미칠 수 있음 | 명시적 호출로만 실행되므로 성능 영향이 적음 |
| **주요 용도** | 데이터 무결성, 감사, 참조 무결성 유지 | 복잡한 로직 처리, 계산, 일괄 작업 |

---

# 정리

- *트리거(Trigger)*는 **특정 이벤트가 발생할 때 자동으로 실행**되는 데이터 무결성 유지, 감사 기록 또는 비즈니스 로직을 적용하기 위한 도구입니다. 
사용자가 직접 호출할 필요 없이, 데이터 조작 작업과 함께 실행되므로 자동화된 처리가 필요한 경우에 유용합니다.
- *프로시저(Procedure)*는 사용자가 직접 **명시적으로 호출**하여 실행하는 프로그램으로, 복잡한 로직을 여러 테이블에서 반복적으로 처리하거나, 일괄 작업을 수행할 때 사용됩니다. 
파라미터를 받아 동작을 유연하게 제어할 수 있고, 값을 반환할 수도 있습니다.
- 트리거는 자동화된 작업이 필요할 때, 프로시저는 명시적인 호출과 재사용 가능한 로직을 처리할 때 적합한 선택입니다.