---
title: "API의 인증과 권한"
date: 2025-08-18T00:00:00
toc: true
toc_sticky: true
categories:
    - Back-end
tags:
    - Auth
    - Authentication
    - Authorization
---

# API에서 인증과 권한 부여를 어떻게 하는가

- **인증(Authentication)**은 사용자가 누구인지 확인하는 과정
- **권한 부여(Authorization)**는 인증된 사용자가 특정 작업이나 자원에 접근할 수 있는 권한이 있는지 확인하는 과정
- 이 둘은 API 보안의 핵심 요소로, 일반적으로 토큰 기반 인증 방식과 권한 정책을 통해 구현된다.

---

# 인증(Authentication)

- **인증**은 사용자의 신원을 확인하는 과정으로, 주로 아래와 같은 방법으로 수행된다.

## **API Key**

- API 호출 시 클라이언트가 고유한 키(API Key)를 사용해 인증.
- 키를 HTTP 헤더나 쿼리 매개변수로 전달.
    
    **예시**
    
    ```bash
    GET /resource?api_key=1234567890abcdef
    ```
    
    또는
    
    ```makefile
    Headers: Authorization: ApiKey 1234567890abcdef
    ```
    
### **장점**

- 간단하고 빠르게 설정 가능.
- 정적 서비스에 적합.

### **단점**

- 키가 유출되면 보안 위협 발생.
- 사용자 기반 세분화 부족.

---

## **JWT (JSON Web Token)**

- 클라이언트가 서버에서 발급받은 토큰을 사용해 요청.
- 토큰은 HTTP 헤더에 포함되며, 암호화를 통해 안전성을 유지.
    
    **예시**
    
    ```makefile
    Headers: Authorization: Bearer <jwt_token>
    ```
    
### **특징**

- 서명을 통해 토큰 무결성 보장.
- 페이로드에 사용자 정보를 포함해 상태를 유지하지 않는 무상태 인증 가능.

---

## **OAuth 2.0**

- 외부 인증 서버를 사용해 사용자를 인증.
- 인증 과정에서 엑세스 토큰과 리프레시 토큰을 발급받아 사용.
    
    **예시**
    
    ```makefile
    Headers: Authorization: Bearer <access_token>
    ```
    
### **장점**

- 소셜 로그인 및 제3자 서비스와의 통합에 적합.
- 엑세스 토큰 만료 시 리프레시 토큰으로 갱신 가능.

---

# 권한 부여(Authorization)

- **권한 부여**는 인증된 사용자가 특정 리소스나 작업에 접근할 수 있는지 확인하는 과정으로, 아래 방법으로 구현된다.

## **역할 기반 접근 제어 (Role-Based Access Control, RBAC)**

- 사용자를 역할(Role)로 분류하고, 각 역할에 권한을 정의.
- 사용자는 자신의 역할에 따라 자원에 접근.
    
    **예시**
    
    - 관리자: 모든 자원에 대한 읽기/쓰기 권한.
    - 일반 사용자: 자신 소유 자원에 대한 읽기/쓰기 권한.

## **정책 기반 접근 제어 (Policy-Based Access Control, PBAC)**

- 더 세부적인 정책 조건을 기반으로 권한을 부여.
- 예: 특정 시간, IP 주소, 리소스 소유 여부 등을 조건으로 설정.
    
    **예시**
    
    ```arduino
    정책: "관리자는 모든 자원에 접근 가능하다."
    ```
    

## **ACL (Access Control List)**

- 각 자원에 대한 접근 권한을 개별적으로 설정.
- 사용자별로 권한을 관리하는 방식.
    
    **예시**
    
    ```yaml
    리소스 A → 사용자 X: 읽기 권한
              사용자 Y: 쓰기 권한
    ```
    

## **스코프 기반 권한 (Scopes)**

- OAuth 2.0 또는 JWT와 함께 사용.
- 엑세스 토큰에 포함된 스코프를 통해 권한 범위를 정의.
    
    **예시**
    
    ```json
    "scopes": ["read:users", "write:orders"]
    ```
    
    **활용**
    
    - 클라이언트는 특정 API 호출 시 필요한 최소 권한만 요청.

---

# 구현 절차

## **클라이언트 인증**

- 클라이언트는 자격 증명(API Key, JWT 등)을 서버로 전송.
- 서버는 자격 증명을 검증하고 사용자 신원을 확인.

## **권한 확인**

- 서버는 요청된 자원과 작업에 대해 사용자의 권한을 확인.
- 역할(Role), 정책(Policy), 스코프(Scopes) 등을 기반으로 확인.

## **응답 반환**

- 권한이 있으면 요청된 작업 수행.
- 권한이 없으면 403 Forbidden 응답.

---

# 장점

## **보안 강화**:

- 인증과 권한 부여를 통해 불법 접근 방지.

## **유연성**:

- 역할, 정책, 스코프 등을 활용한 세부 권한 설정 가능.

## **확장성**:

- OAuth 2.0 등을 활용해 대규모 서비스에 적합.

# 단점

## **구현 복잡성**:

- 인증 및 권한 시스템 구축에 시간과 비용이 소요.

## **관리 부담**:

- 자격 증명 및 권한 변경을 지속적으로 관리해야 함.

---

# **요약**

- API에서 인증은 사용자의 신원을 확인하는 과정, 권한 부여는 사용자가 리소스에 접근 가능한지 확인하는 과정이다.
- 인증 방식으로는 API Key, JWT, OAuth 2.0이 주로 사용되며, 권한 부여는 RBAC, 스코프 기반 접근 제어 등을 통해 세분화된다.
- 안전하고 확장 가능한 인증 및 권한 부여 체계를 구축하는 것이 API 보안의 핵심이다.